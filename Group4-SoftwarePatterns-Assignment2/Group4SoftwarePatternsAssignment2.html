<!DOCTYPE html>
<html lang="en-us">
<head>
    <title>Group 4 - Software Patterns - Assignment 2</title>
    <link rel="stylesheet" type="text/css" href="report-style.css" />
</head>
<body>
    <div class="margincontainer">
        <article class="textcontainer" id="outer_root">
            <header class="titlepage">
                <hgroup>
                    <h1>
                        Mercurial</h1>
                    <h2>
                        Software Patterns</h2>
                    <h2>
                        Assignment 2</h2>
                    <h2>
                        Group 4</h2>
                    <h2>
                        Version 2</h2>
                </hgroup>
                <div class="authorsbox">
                    <div>
                        Divya Avalur</div>
                    <div>
                        Assel Bekbatyrova</div>
                    <div>
                        Eamon Nerbonne</div>
                    <div>
                        Sunna Björg Sigurjónsdóttir</div>
                    <div>
                        Edy Suharto</div>
                </div>
            </header>
            <!-- Revision history page -->
            <nav>
                <h1>
                    Contents</h1>
                <div class="generateTableOfContents">
                </div>
            </nav>
            <aside>
                <h1>
                    Revision history</h1>
                <table class="bookstyleborders">
                    <tbody>
                        <tr>
                            <th>
                                Date
                            </th>
                            <th>
                                Version
                            </th>
                            <th>
                                Description
                            </th>
                        </tr>
                        <tr>
                            <td>
                                19/12/2011
                            </td>
                            <td class="centered">
                                1
                            </td>
                            <td>
                                <dl>
                                    <dt>Assel</dt><dd>Stakeholder concerns, key drivers, patterns</dd>
                                    <dt>Divya</dt><dd>Introduction of the system and overview of contents</dd>
                                    <dt>Eamon</dt><dd>System context text, SR diagram</dd>
                                    <dt>Edy</dt><dd>System context diagram</dd>
                                    <dt>Sunna</dt><dd>Document creation, stakeholders and concerns, patterns</dd>
                                </dl>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                9/1/2012
                            </td>
                            <td class="centered">
                                2
                            </td>
                            <td>
                                <dl>
                                    <dt>Sunna, Eamon</dt><dd>Conversion from google docs into HTML on mercurial; minor updates.</dd>
                                </dl>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                16/01/2012
                            </td>
                            <td class="centered">
                                3
                            </td>
                            <td>
                                <dl>
                                    <dt>Assel</dt><dd></dd>
                                    <dt>Divya</dt><dd></dd>
                                    <dt>Eamon</dt><dd></dd>
                                    <dt>Edy</dt><dd>Architectural View: process, physical</dd>
                                    <dt>Sunna</dt><dd></dd>
                                </dl>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </aside>
            <section id="section-introduction">
                <!-- Chapter 1 - Introduction -->
                <h1>
                    Introduction</h1>
                <p>
                    The document presents the pattern-based recovery and evaluation of the architecture
                    of an open-source system, <a href="#bib-mercurial">Mercurial</a>. It is a distributed version control system.
                    This document gives an overview of the patterns that represent the core of the Mercurial
                    system. We use the IDAPO for identifying the architectural patterns in Open source
                    software. We also discuss about the specific variants of the patterns which we chose.
                    Furthermore we need to evaluate the found patterns using Pattern-Based Architectural
                    Review method. the evaluation of the consequences of patterns is based on the system’s
                    quality attributes.
                </p>
                <p>
                    The structure of the document is as follows:
                </p>
                <p>
                    <a href="#section-context" class="ref">Section [2]</a> describes the system context of Mercurial
                    version control system. <a href="#section-stakeholders" class="ref">Section [3]</a> deals with identifying the stakeholders and their
                    concerns as well as the key drivers which should drive the development of the system.
                </p>
                <p>
                    <a href="#section-architecture" class="ref">Section [4]</a> describes the various architectural views for the system and also the
                    architectural patterns identified for the Mercurial system using IDAPO. It also
                    discusses how the various patterns are related with each other and the impact of
                    each pattern on the system architecture and also discusses about the variants used.
                    It also includes the decomposition of the patterns, responsibilities of each component
                    in the patterns and also about the interfaces.
                </p>
                <p>
                    <a href="#section-evaluation" class="ref">Section [5]</a> is mainly focused on the architectural evaluation of the Mercurial system
                    using PBAR approach. It also shows how each quality attribute identified are addressed.
                </p>
            </section>
            <section id="section-context">
                <!-- Chapter 2 - System context -->
                <h1>
                    System context <span class="rightbox">(5%)</span></h1>
                <p>
                    Mercurial<sup><a href="#merc_links" id="merc_links_ref">[a]</a></sup> is a distributed
                    revision control system. It aims to help developers manage changes (revisions) made
                    to projects. Managing multiple versions of even a single document by hand is an
                    error-prone, time-consuming task. Mercurial allows a team of developers to manage
                    large numbers of documents with many versions. Although mercurial can maintain a
                    version history for arbitrary files and directories, it is designed in particular
                    to deal well with large numbers of complex text documents such as source code. There
                    are several ways in which mercurial helps address the problems arising from collaborating
                    on such code.
                </p>
                <section>
                    <h1>
                        Mercurial’s functionality</h1>
                    <p>
                        Firstly, Mercurial maintains a log: an annotated history of changes. In addition
                        to keeping track of the documents themselves, mercurial allows developers to keep
                        track of which lines were changed, the date the changes were made, the identity
                        of the author, and, importantly, the motivation for these changes. This is achieved
                        by splitting changes into cohesive chunks call changesets. When a developer commits
                        a changeset, he adds it to Mercurial’s repository of changesets, and includes a
                        commit message describing what was changed and why. Changesets with commit messages
                        are common in revision control systems; they allow developers to maintain systems
                        that are too large or too old by reducing the need to grasp the entirety of the
                        system at once.
                    </p>
                    <p>
                        Mercurial assists collaboration by allowing concurrent edits. When several people
                        simultaneously change a set of files, their changes need to be merged into a final
                        version. Revision control systems such as mercurial assist the user by largely automating
                        this process: if only one author changes a file, his version simply replaces the
                        old one. When multiple authors change a file in a format mercurial understands (such
                        as plain text), changes to non-overlapping regions are automatically merged. Finally,
                        where changes do conflict, they are reported, and the user can systematically compare
                        the changes to resolve the conflict. Automatic merging and conflict detection helps
                        allow multiple developers work on the same project by avoiding the friction of each
                        developer keeping abreast of all changes.</p>
                    <p>
                        Mercurial allows distributed development teams by allowing any developer to pull
                        others’ changes or push his own to an external repository. Crucially, there is no
                        technical need for a central repository nor for “one true” history, allowing for
                        truly distributed development. In particular, each committed changeset is uniquely
                        identifiable, allowing mercurial to avoid applying changes it has already seen,
                        even if those changes depend on each other in non-trivial ways. Mercurial’s logged
                        history is conceptually a directed acyclic graph. Thus when two versions are merged
                        that (partially) share the same history, the shared part of the history is not duplicated.</p>
                    <p>
                        These three features enable many useful scenarios. For instance, in a large system,
                        development mistakes are made. Since it maintains a history of changes and the details
                        of each changes, mercurial can revert a particular change e.g. to correct a mistake.
                        Unlike a strictly linear process, such a reverted change does not require the user
                        to redo all subsequent changes; instead, the reverted change is itself a new changeset
                        that can be merged anywhere into the version history.
                    </p>
                    <img height="230" src="images/image00.png" width="302" alt="Mercurial communication dataflow" />
                    <p>
                        <span class="highlight"><b>TODO: </b><i>This diagram doesn't seem to pertain to the
                            above directly; remove?</i></span>
                    </p>
                    <p>
                        Business model: System context, Architectural relevant business parameters.</p>
                    <p>
                        Show system context and OSS community.</p>
                </section>
            </section>
            <section id="section-stakeholders">
                <!-- Chapter 3 - Stakeholders and concerns -->
                <h1>
                    Stakeholders and concerns <span class="rightbox">(10%)</span></h1>
                <section>
                    <h1>
                        Stakeholders and concerns</h1>
                    <dl>
                        <dt>End user</dt><dd>The end user (software developer) can be a large team of people
                            as well as one person.</dd>
                        <dt>Mercurial management</dt><dd>
                        </dd>
                        <dt>Mercurial software developer</dt><dd>There is currently one full-time developer
                            working on Mercurial
                        </dd>
                        <dt>Patch/extension developer</dt><dd>Mercurial welcomes patches and extensions from
                            any software developer.
                        </dd>
                    </dl>
                    <table class="bookstyleborders">
                        <tbody>
                            <tr>
                                <th>
                                    Stakeholder
                                </th>
                                <th>
                                    Concerns
                                </th>
                                <th>
                                    Concern priority
                                </th>
                                <th>
                                    Stakeholder priority
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    End user
                                </td>
                                <td>
                                    <dl>
                                        <dt>Reliability:</dt><dd>
                                            The system should be stable and reliable to use for projects</dd>
                                        <dt>Adaptability:</dt><dd>
                                            The system should adapt to a users needs in terms of extensions needed</dd>
                                        <dt>Dependability:</dt><dd>
                                            Revisions should be accurate and easily exchanged</dd>
                                        <dt>-ablity:</dt><dd>Data should not be lost in case of a breakdown in the system</dd>
                                        <dt>Scalability:</dt><dd>
                                            They system should be able to handle large amounts of new data being submitted to
                                            the system at a particular time</dd>
                                        <dt>Usability:</dt><dd>
                                            The system should be easy to use</dd>
                                        <dt>Learnability:</dt><dd>
                                            The system should be easy to learn, not take more than a couple of days of using
                                            to get well accustom to it</dd>
                                        <dt>Supportablity:</dt><dd>
                                            The system should come with user support</dd>
                                        <dt>?-ability:</dt><dd>
                                            The system should be perfectly suitable for large projects, for that it has to work
                                            really fast.</dd>
                                    </dl>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Mercurial management
                                </td>
                                <td>
                                    <dl>
                                        <dt>Changeability: </dt>
                                        <dd>
                                            The application server should be easy changeable to adapt to the specific needs
                                            for the application which is run on top of it.</dd>
                                        <dt>Adaptability:</dt><dd>
                                            The system should easily integrate in various environments</dd>
                                    </dl>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Mercurial software developer
                                </td>
                                <td>
                                    <dl>
                                        <dt>Usability:</dt><dd>
                                            The code should be well documented</dd>
                                        <dt>Efficiency:</dt><dd>For effective work of the system WAN bandwidth and disk seek
                                            rate should be optimized for the system.
                                        </dd>
                                    </dl>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Patch/ extension developers
                                </td>
                                <td>
                                    <dl>
                                        <dt>Usability:</dt><dd>
                                            The code should be well documented</dd>
                                    </dl>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h1>
                        Key drivers</h1>
                    <dl>
                        <dt>Usability:</dt><dd>The whole system should be as simple as possible to get start
                            to work on it</dd>
                        <dt>Scalability/Extensibility:</dt><dd>The system repository should be extensible to
                            store entire data</dd>
                        <dt>Portability:</dt><dd>  </dd>
                        <dt>Performance:</dt><dd>  </dd>
                        <dt>Reliability:</dt><dd>  </dd>
                    </dl>
                </section>
            </section>
            <section id="section-architecture">
                <!-- Chapter 4 Architecture -->
                <h1>
                    Architecture <span class="rightbox">(30%)</span></h1>
                <p>
                    Show the individual patterns, their variants and how they integrate in the entire
                    architecture; show at most 2 views.</p>
                <section>
                <!--################################### From Views.html ###############-->
                    <h1>
                        Architectural views</h1>
                    <section>
                        <h1><!--Divya-->
                            Logical view</h1>
                        <p>
                            The logical view for the Mercurial describes the functionality of the Mercurial
                            system to the end-users. Mercurial is a modern distributed version control system(VCS)
                            which is written in Python. The main advantage of distributed VCS is that it allows
                            developers to push around and intergrate changes as the project requires at each
                            point of time. The logical view of the Mercurial can be briefly discussed as follows:
                            The Mercurial architecture consists of a large number of modules.Each module has
                            its own repository. The user can clone the repository to code the module. The end
                            user can use several clones. Modules have their own unit tests. So code tests have
                            to pass (i.e. yield only successes) before the user repositories to be pushed into
                            the files. A build server then tests again each push, because problems may appear
                            (e.g. platform-compatibility, or missing files). When a module is ready, it is pushed
                            into the testing repository. In this repository, the QA tests the modules. Developers
                            may code in this repository (mainly to fix bugs), but they should not add new features
                            to the code. If the test is successful then the user releases it by pushing it into
                            the stable repository.</p>
                    </section>
                    <section>
                        <h1><!--Divya-->
                            Development view</h1>
                        <p>
                            The development view for the Mercurail deals mainly with the software development
                            and management. We can also find few bits in C because they are critical to the
                            performance of the system. A Python module correspoonds to a single file of code.
                            Modules are the basic organizers for the source code. Mercurial contains a package
                            known as _init_.py which exposes all modules and packages to the Python importer.
                            It also has two default packages called the 'mercurial' and 'hgext'. The 'mercurial'package
                            contains the core code required to run Mercurial whereas 'hgext' contains a lrage
                            number of extensions. Mercurial can be basically categorized as a Command-line application.
                            One of the powerful features of Mercurial is the ability to write the extensions.
                            It is quite simple and easy to extend Mercurial beacuse of Python. other feature
                            of Mercurial is 'Hooks'which provide a way to the VCS events to interact with the
                            outside world. There are two variants of hooks one is the traditional hook which
                            invokes scripts in the shell. The other one is the Python hook which invokes Python
                            module and a function name to call from that module. In Mercurial, hooks are divided
                            into four types:
                        </p>
                        <ol>
                            <li>pre-command</li>
                            <li>post-command</li>
                            <li>controlling</li>
                            <li>miscellaneous</li>
                        </ol>
                    </section>
                    <section>
                        <h1><!--Edy-->
                            Process view</h1>
                        <p>
                            The process view of Mercurial depicts the interaction of processes or objects in
                            runtime. When Mercurial tracks modifications to a file, it stores the history of
                            that file in a metadata object called a 'filelog'. Mercurial uses a structure called
                            a 'manifest' to collect together information about the files that it tracks. Each
                            entry in the manifest contains information about the files present in a single changeset.
                            The changelog contains information about each changeset. Within a changelog, a manifest,
                            or a filelog, each revision stores a pointer to its immediate parent (or to its
                            two parents, if it's a merge revision). For every changeset in a repository, there
                            is exactly one revision stored in the changelog. Each revision of the changelog
                            contains a pointer to a single revision of the manifest. A revision of the manifest
                            stores a pointer to a single revision of each filelog tracked when that changeset
                            was created. The underpinnings of changelogs, manifests, and filelogs are provided
                            by a single structure called the revlog. Mercurial only ever appends data to the
                            end of a revlog file. Mercurial treats every write as part of a transaction that
                            can span a number of files. A transaction is atomic: either the entire transaction
                            succeeds and its effects are all visible to readers in one go, or the whole thing
                            is undone. This guarantee of atomicity means that if user is running two copies
                            of Mercurial, where one is reading data and one is writing it, the reader will never
                            see a partially written result that might confuse it. In the working directory,
                            Mercurial stores a snapshot of the files from the repository as of a particular
                            changeset. When user updates the working directory to contain a particular changeset,
                            Mercurial looks up the appropriate revision of the manifest to find out which files
                            it was tracking at the time that changeset was committed, and which revision of
                            each file was then current. It then recreates a copy of each of those files, with
                            the same contents it had when the changeset was committed.</p>
                    </section>
                    <section>
                        <h1><!--Edy-->
                            Physical view</h1>
                        <p>
                            The physical view depicts the system concerned with the topology of software components.
                            Since Mercurial can be seen as peer-to-peer application, each peer has the same
                            structure as the other. Each peer represents a node which contains some layers.
                            In general, no layer should know the details of any layer above it, and no layer
                            should abuse the interface of layers below it. Interface layer is the topmost layer
                            and is the part most directly exposed to the user. It contains commands.py, an implementation
                            of the command line interface which contains most of the code that deals with converting
                            commands into simple repository operations as well as the stdio push/pull interface,
                            and hgweb.py, an implementation of the web interface which contains all the web
                            and templating logic as well as the web based push/pull interface. The second one,
                            Repository layer contains all the objects that implement the core primitives of
                            the SCM such as commit, checkout/update/merge, push/pull, add/remove/copy, verify,
                            and the proxy objects for remote repositories (remoterepository, sshrepository,
                            httprepository, httpsrepository, statichttprepository) and the objects from which
                            the repository is constructed (filelog, manifest, changeset, dirstate). The third
                            one, Storage layer contains the basis for version storage, revlog. The fourth one,
                            UI layer provides generic methods for communicating with the user and managing configuration
                            info. The fifth layer, Utility layer includes generic functionality and platform
                            abstraction.
                        </p>
                    </section>

                    <!-- ############################ END From Views.html ########### -->
                </section>
                <section>
                    <h1>
                        Architectural patterns</h1>
                    <section>
                        <h1>
                            Peer-to-peer</h1>
                 <table class="bookstyleborders">
                    <tbody>
                        <tr>
                            <th>
                                Pattern Section
                            </th>
                            <th>
                                Comments
                            </th>
                        </tr>
                        <tr>
                            <td>
                                Name
                            </td>
                            <td>
                                Peer-to-peer
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Category
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Context
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Variants
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Solution
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rationale
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Consequences
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Related patterns
                            </td>
                            <td>
                               Shared repository 
                            </td>
                        </tr>
                    </tbody>
                </table>

                    </section>
                    <section>
                        <h1>
                            Shared repository</h1>
                        <p>
                            <img height="200" src="images/image01.png" width="571" alt="Mecurial repository storage format" /></p>
<table class="bookstyleborders">
                    <tbody>
                        <tr>
                            <th>
                                Pattern Section
                            </th>
                            <th>
                                Comments
                            </th>
                        </tr>
                        <tr>
                            <td>
                                Name
                            </td>
                            <td>
                                Shared repository
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Category
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Context
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Variants
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Solution
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rationale
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Consequences
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Related patterns
                            </td>
                            <td>
                              Peer-to-peer  
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Key driver
                            </td>
                            <td>
                                Scalability/Extensibility
                            </td>
                        </tr>
                    </tbody>
                </table>
                    </section>
                    <section>
                        <h1>
                            Pipes and filters</h1>
                    
<table class="bookstyleborders">
                    <tbody>
                        <tr>
                            <th>
                                Pattern Section
                            </th>
                            <th>
                                Comments
                            </th>
                        </tr>
                        <tr>
                            <td>
                                Name
                            </td>
                            <td>
                                Pipes and filters
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Problem
                            </td>
                            <td>
                                The design of the system-especially the interconnection of process-ing steps-has to consider the following
                                forces:
                                <ul>
                                <li>Future system enhancements should be possible by exchangingprocessing steps or by recombination of steps, 
                                even by users;</li>
                                <li>Multi-processing the steps, forexample running them in parallel or quasi-parallel.</li>
                                <li>Explicit storage of intermediate results for further processing infiles clutters directories and is error-
                                prone, if done by users</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Category
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Context
                            </td>
                            <td>
                                Processing data streams
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Variants
                            </td>
                            <td>
                               Tee and join pipeline systems.The single-input slngle-output filterspecification of the Pipes and Filters 
                               pattern can be varied to allowfilters wlth more than one input and/or more than one output. Pro-cessing can 
                               then be set up as a directed graph that can even contalnfeedback loops. The deslgn of such a system, especially 
                               one wlthfeedback loops, requires a solid foundation to explain andunderstand the complete calculation-a rigorous 
                               theoretical analyslsand specification using formal methods are appropriate, to prove thatthe system terminates 
                               and produces the desired result  
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Solution
                            </td>
                            <td>
                                The Pipes and Filters architectural pattern divides the task of asystem into several sequential processing 
                                steps. These steps areconnected by the data flow through the system-the output data of astep is the input to 
                                the subsequent step. Each processing step isimplemented by a filter component.A filter consumes and deliversdata 
                                incrementally-in contrast to consuming all its input beforeproducing any output-to achieve low latency and enable 
                                real parallelprocessing. 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rationale
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Consequences
                            </td>
                            <td>
                               Computing resultsusing separate programs is possible without pipes, by storingintermediate results in files. This 
                               approach clutters directories, andis error-prone if you have to set up your processing stages every timeyou run your 
                               system. In addition, it rules out incremental andparallel computation of results.

                               Filters have a simple interface thatallows their easy exchange within a processing pipeline. Even if filtercomponents 
                               call each other directly in a push or pull fashion,exchanging a filter component is still straightforward.  

                               It is possible to start active filtercomponents in parallel in a multiprocessor system or a network. Ifeach filter in 
                               a pipeline consumes and produces data incrementallythey can perform their functions in parallel.

                               Using a single data type for all filterinput and output to achieve highest flexibility results in dataconversion overheads. 
                               Consider a system that performs numericcalculations and uses UNIX pipes. Such a system must convert ASCIIcharacters to real 
                               numbers, and vice-versa, within each filter. Asimple filter, such as one that adds two numbers, will spend most ofits 
                               processing time doing format conversion.

                               
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Related patterns
                            </td>
                            <td>
                                Shared repository
                            </td>
                        </tr>
                         <tr>
                            <td>
                                Key driver
                            </td>
                            <td>
                                Portability
                            </td>
                        </tr>
                    </tbody>
                </table>
                    </section>
                    <section>
                        <h1>
                            Client server</h1>
                <table class="bookstyleborders">
                    <tbody>
                        <tr>
                            <th>
                                Pattern Section
                            </th>
                            <th>
                                Comments
                            </th>
                        </tr>
                        <tr>
                            <td>
                                Name
                            </td>
                            <td>
                                Client server
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Problem
                            </td>
                            <td>
                               System based on clients connecting to the server is an inherent feature of Mercirial and is an essential
                               need for all concerned stakeholders.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Category
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Context
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Variants
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Solution
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rationale
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Consequences
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Related patterns
                            </td>
                            <td>
                                Broker
                            </td>
                        </tr>
                        </tbody>
                </table>
                    </section>
                    <section>
                        <h1>
                            Broker</h1>
                <table class="bookstyleborders">
                    <tbody>
                        <tr>
                            <th>
                                Pattern Section
                            </th>
                            <th>
                                Comments
                            </th>
                        </tr>
                        <tr>
                            <td>
                                Name
                            </td>
                            <td>
                                Broker
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Problem
                            </td>
                            <td>
                               Mercurial system becomes dependent on the communication mechanism used, clientsneed to know the location of servers, 
                               and uses only one programming language(Python).
                               Use the Broker architecture to balance the following forces:
                               <ul>
                               <li>Components should be able to access services provided by othersthrough remote, location-transparent service invocations</li>
                               <li>The architecture should hide system- and implementation-specificdetails from the users of components and services.</li>
                               </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Category
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Context
                            </td>
                            <td>
                                Server identication should be performed in a manner which allows for remoting servers to be easily
                                identied and called upon. Communication details regarding transport protocols, data (un)marshalling 
                                and serialisation should be hidden from the user.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Variants
                            </td>
                            <td>
                            <ul>
                               <li>Callback Broker System. Instead of implementing an activecommunication model in which clients produce requests 
                               and serversconsume them, you can also use a reactive model. The reactive model Is event-driven, and makes no 
                               distinction between clients andservers. Whenever an event arrives, the broker invokes the callbackmethod of the  
                               component that is registered to react to the event.  </li>
                               <li>Adapter Broker System. You can hide the interface of the brokercomponent to the servers using an additional layer, 
                               to enhanceflexibility. This adapter layer is a part of the broker and is responsiblefor registering servers and interacting 
                               with servers. By supplyingmore than one adapter, you can support different strategies for servergranularity and server location.</li>
                            </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Solution
                            </td>
                            <td>
                                Introduce a broker component to achieve better decoupling of clientsand servers. Servers register themselves 
                                with the broker, and maketheir services available to cllents through method interfaces. Clientsaccess the 
                                functionality of servers by sending requests via the broker. A broker's tasks include locating the appropriate 
                                server, forwardingthe request to the server and transmitting results and exceptionsback to the client.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rationale
                            </td>
                            <td>
                                
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Consequences
                            </td>
                            <td>
                                Location Transparency. As the broker is responsible for locating aserver by using a unique identifier, clients do not need to know 
                                whereservers are located. Similarly, servers do not care about the locationof calling clients, as they receive 
                                all requests from the local brokercomponent.
                                Changeability and extensibility of components. If servers change buttheir interfaces remain the same, it has no functional impact 
                                onclients. Modifymg the internal implementation of the broker, but notthe APIs it provides, has no effect on clients and servers other 
                                thanperformance changes.
                                Portability of a Broker system. The Broker system hides operating sys-tem and network system details from clients and servers by 
                                usingindirection layers such as APIs, proxies and bridges. When porting isrequired, it is therefore sufficient in most cases to port 
                                the brokercomponent and its APIs to a new platform and to recompile clientsand servers.
                                Reusability. When building new client applications, you can oftenbase the functionality of your application on existing services. 
                                Suppose you are going to develop a new business application.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Related patterns
                            </td>
                            <td>
                                Client server
                            </td>
                        </tr>
                    </tbody>
                </table>
                    </section>
                </section>
                <section>
                    <h1>
                        Decomposition, component responsibilities &amp; interfaces</h1>
                </section>
            </section>
            <section id="section-evaluation">
                <h1>
                    Evaluation &amp; recommendations <span class="rightbox">(35%)</span></h1>
                <p>
                    Follow PBAR to evaluate the quality attributes based on the patterns.</p>
                <p>
                    Emphasize on recommendations on how to improve the system.</p>
            </section>
            <aside class="bibliography">
                <h1>
                    References</h1>
                <ul>
                    <li id="bib-mercurial">Mackall et al. <a href="http://mercurial.selenic.com/">Mercurial
                        SCM</a> 2011.</li>
                    <li id="merc_links"><a href="http://hgbook.red-bean.com/read/how-did-we-get-here.html">
                        Mercurial book, motivation</a>, <a href="http://hginit.com/">HgInit</a>—a mercurial
                        tutorial, <a href="http://mercurial.selenic.com/guide/">The Mercurial User's Guide</a>,
                        <a href="http://mercurial.selenic.com/wiki/">The Mercurial Wiki</a></li>
                    <li>Frank Buschmann, Regine Meunier, Hans Rohnert, and Peter Sommerlad.Pattern-Oriented
                        Software Architecture Volume 1: A System of Patterns. 1996.</li>
                    <li>Bryan O'Sullivan Mercurial: The Definitive Guide ?year?</li>
                    <li><a href="http://www.aosabook.org/">AOSA Book</a></li>
                    <li><a href="http://en.wikipedia.org/">Wikipedia</a></li>
                    <li><a href="http://hgbook.red-bean.com/read/behind-the-scenes.html#x8-640004">HG Book
                        Chapter 4</a></li>
                    <li><a href="http://mercurial.selenic.com/wiki/WhatGoesWhere">Mercurial Architecture</a>
                    </li>
                </ul>
            </aside>
        </article>
    </div>
</body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="generateTOC.js"></script>
</html>
